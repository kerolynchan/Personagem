<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kerolyn Arte Digital - Criar Personagem</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<div class="container">
    <h1>KEROLYN ARTE DIGITAL</h1>
    <h2>CRIE SEU PERSONAGEM</h2>
    <h4>â€œPor favor, preencha todos os campos abaixo para garantir uma criaÃ§Ã£o precisa.â€</h4>
    <div class="form-box">
        <form id="personagemForm">

            <!-- Dados Pessoais -->
            <h3>Dados Pessoais</h3>
            <label>Nome: <input type="text" name="nome" required placeholder="Ex: Kerolyn"></label>
            <label>Finalidade do personagem: <input type="text" name="finalidade" required placeholder="Ex: Gamer, comÃ©rcio..."></label>
            </label>
            


            <!-- Base do Personagem -->
            <h3>Base do Personagem</h3>
            <label>GÃªnero:
                <select name="genero" required>
                    <option value="">Selecione...</option>
                    <option value="Feminino" data-preco="0">Feminino â†’ GrÃ¡tis</option>
                    <option value="Masculino" data-preco="0">Masculino â†’ GrÃ¡tis</option>
                    <option value="Neutro" data-preco="0">Neutro â†’ GrÃ¡tis</option>
                </select>
            </label>
            <label>Faixa etÃ¡ria: <input type="text" name="idade" required placeholder="Ex: 20 anos"></label>
           
           <!-- ExpressÃ£o -->
<label>ExpressÃ£o Facial:</label>
<select name="expressao" required>
    <option value="">Selecione...</option>
    <option value="Neutra" data-preco="0">Neutra â†’ GrÃ¡tis</option>
    <option value="Sorriso leve" data-preco="0">Sorriso leve â†’ GrÃ¡tis</option>
    <option value="Bravo" data-preco="2">Bravo â†’ +R$2</option>
    <option value="Triste" data-preco="2">Triste â†’ +R$2</option>
    <option value="Sorriso exagerado" data-preco="3">Sorriso exagerado â†’ +R$3</option>
    <option value="Manual" data-preco="5">Descrever expressÃ£o â†’ +R$5</option>
</select>
<input type="text" name="expressao_manual" placeholder="Descreva sua expressÃ£o" style="display:none; margin-bottom:10px;">

    
<!-- Tipo de Arte -->
<label>Tipo de Arte:</label>
<select name="tipo_arte" required>
    <option value="">Selecione...</option>
    <option value="Retrato" data-preco="2">Retrato (rosto e ombros) â†’ +R$2</option>
    <option value="Meio corpo" data-preco="5">Meio corpo â†’ +R$5</option>
    <option value="Corpo inteiro" data-preco="8">Corpo inteiro â†’ +R$8</option>
</select>
            



            <!-- AparÃªncia do personagem -->
            <h3>Tipo de Personagem</h3>

            <label>RaÃ§a:</label>
            <select name="raca" required>
                <option value="">Selecione...</option>
                <option value="Humano" data-preco="0">Humano â†’ GrÃ¡tis</option>
                <option value="Humanoide felino" data-preco="3">Humanoide felino â†’ +R$3</option>
                <option value="Humanoide canino" data-preco="3">Humanoide canino â†’ +R$3</option>
                <option value="Humanoide raposa" data-preco="3">Humanoide raposa â†’ +R$3</option>
                <option value="Elfo" data-preco="5">Elfo â†’ +R$5</option>
                <option value="Orc" data-preco="5">Orc â†’ +R$5</option>
                <option value="DemÃ´nio" data-preco="5">DemÃ´nio â†’ +R$5</option>
                <option value="Anjo" data-preco="5">Anjo â†’ +R$5</option>
                <option value="RobÃ´" data-preco="7">RobÃ´ â†’ +R$7</option>
                <option value="Cyborg" data-preco="7">Cyborg â†’ +R$7</option>
                <option value="Morto-vivo" data-preco="5">Morto-vivo â†’ +R$5</option>
                <option value="Criatura fantÃ¡stica" data-preco="10">Criatura fantÃ¡stica â†’ +R$10</option>
                <option value="Manual" data-preco="3">Descrever raÃ§a â†’ +R$3</option>
            </select>
            <input type="text" name="raca_outro" placeholder="Descreva seu personagem" style="display:none; margin-bottom:10px;">

<!-- Tom de pele -->
<label>Tom de pele:</label>
<select name="tom_pele" required>
    <option value="">Selecione...</option>
    <option value="Clara" data-preco="0">Clara â†’ GrÃ¡tis</option>
    <option value="Morena" data-preco="0">Morena â†’ GrÃ¡tis</option>
    <option value="Negra" data-preco="0">Negra â†’ GrÃ¡tis</option>
    <option value="PÃ¡lida" data-preco="2">PÃ¡lida â†’ +R$2</option>
    <option value="Azul" data-preco="3">Azul â†’ +R$3</option>
    <option value="Verde" data-preco="3">Verde â†’ +R$3</option>
    <option value="Vermelho" data-preco="3">Vermelho â†’ +R$3</option>
    <option value="Manual" data-preco="5">Descrever cor â†’ +R$5</option>
</select>
<input type="text" name="tom_pele_manual" placeholder="Ex: #BD5769" style="display:none; margin-bottom:10px;">

<!-- Cor dos olhos -->
<label>Cor dos olhos:</label>
<select name="cor_olhos" required>
    <option value="">Selecione...</option>
    <option value="Castanho" data-preco="0">Castanho â†’ GrÃ¡tis</option>
    <option value="Preto" data-preco="0">Preto â†’ GrÃ¡tis</option>
    <option value="Azul" data-preco="0">Azul â†’ GrÃ¡tis</option>
    <option value="Verde" data-preco="0">Verde â†’ GrÃ¡tis</option>
    <option value="Mel" data-preco="0">Mel â†’ GrÃ¡tis</option>
    <option value="Roxo" data-preco="3">Roxo â†’ +R$3</option>
    <option value="Cinza" data-preco="3">Cinza â†’ +R$3</option>
    <option value="Vermelho" data-preco="3">Vermelho â†’ +R$3</option>
    <option value="Amarelo" data-preco="3">Amarelo â†’ +R$3</option>
    <option value="Multicolorido" data-preco="5">Multicolorido â†’ +R$5</option>
    <option value="DegradÃª" data-preco="5">DegradÃª â†’ +R$5</option>
    <option value="SÃ­mbolos" data-preco="5">SÃ­mbolos â†’ +R$5</option>
    <option value="Manual" data-preco="5">Descrever cor â†’ +R$5</option>
</select>
<input type="text" name="cor_olhos_manual" placeholder="Ex: #BD5769" style="display:none; margin-bottom:10px;">


<label>Formato do rosto:</label>
            <select name="formato_rosto" required>
                <option value="">Selecione...</option>
                <option value="Oval" data-preco="0">Oval â†’ GrÃ¡tis</option>
                <option value="Redondo" data-preco="0">Redondo â†’ GrÃ¡tis</option>
                <option value="Quadrado" data-preco="2">Quadrado â†’ +R$2</option>
                <option value="Triangular" data-preco="2">Triangular â†’ +R$2</option>
                <option value="Manual" data-preco="3">Descrever formato â†’ +R$3</option>
            </select>
            <input type="text" name="formato_rosto_manual" placeholder="Descreva o formato do rosto" style="display:none; margin-bottom:10px;">

            <!-- Mechas -->
<label>Mechas:</label>
<select name="mechas" required>
    <option value="">Selecione...</option>
    <option value="Sem mechas" data-preco="0">Sem mechas â†’ GrÃ¡tis</option>
    <option value="Mecha simples" data-preco="3">Mecha simples no rosto  â†’ +R$3</option>
    <option value="Mecha colorida" data-preco="3">Mecha vitiligo â†’ +R$3</option>
    <option value="Manual" data-preco="5">Descrever mecha â†’ +R$5</option>
</select>
<input type="text" name="mechas_manual" placeholder="Descreva a cor da mecha" style="display:none; margin-bottom:10px;">

<!-- Marcas no corpo/rosto -->
<label>Marcas no corpo / rosto:</label>
<select name="marcas" required>
    <option value="">Selecione...</option>
    <option value="Nada" data-preco="0">Nada â†’ GrÃ¡tis</option>
    <option value="Pinta" data-preco="1">Pinta aleatoria â†’ +R$1</option>
    <option value="Cicatriz" data-preco="2">Cicatriz aleatoria â†’ +R$2</option>
    <option value="Tatuagem simples" data-preco="3">Tatuagem simples aleatoria â†’ +R$3</option>
    <option value="Tatuagem grande" data-preco="5">Ferida aleatoria â†’ +R$5</option>
    <option value="Queimadura" data-preco="5">Queimadura aleatoria â†’ +R$5</option>
    <option value="Manual" data-preco="5">Descrever marca â†’ +R$5</option>
</select>
<input type="text" name="marcas_manual" placeholder="Descreva suas marcas" style="display:none; margin-bottom:10px;">


            <!-- AparÃªncia do personagem -->
            <h3>Pelos do Personagem</h3>

            <label>Tipo de cabelo:</label>
            <select name="tipo_cabelo" required>
                <option value="">Selecione...</option>
                <option value="Liso" data-preco="0">Liso â†’ GrÃ¡tis</option>
                <option value="Ondulado" data-preco="0">Ondulado â†’ GrÃ¡tis</option>
                <option value="Cacheado" data-preco="3">Cacheado â†’ +R$3</option>
                <option value="Crespo" data-preco="3">Crespo â†’ +R$3</option>
                <option value="Manual" data-preco="5">Descrever Estilizado â†’ +R$5</option>
            </select>
            <input type="text" name="tipo_cabelo_manual" placeholder="Descreva o tipo de cabelo" style="display:none; margin-bottom:10px;">

            <label>Comprimento do cabelo:</label>
            <select name="comprimento_cabelo" required>
                <option value="">Selecione...</option>
                <option value="Careca" data-preco="2">Careca â†’ +R$2</option>
                <option value="Curto" data-preco="0">Curto â†’ GrÃ¡tis</option>
                <option value="MÃ©dio" data-preco="3">MÃ©dio â†’ +R$3</option>
                <option value="Longo" data-preco="5">Longo â†’ +R$5</option>
                <option value="Muito longo" data-preco="7">Muito longo â†’ +R$7</option>
            </select>

            <label>Penteado:</label>
            <select name="penteado" required>
                <option value="">Selecione...</option>
                <option value="Solto" data-preco="0">Solto â†’ GrÃ¡tis</option>
                <option value="Coque" data-preco="3">Coque â†’ +R$3</option>
                <option value="Rabo de cavalo" data-preco="3">Rabo de cavalo â†’ +R$3</option>
                <option value="TranÃ§as" data-preco="4">TranÃ§as â†’ +R$4</option>
                <option value="Manual" data-preco="5">Estilizar penteado â†’ +R$5</option>
            </select>
            <input type="text" name="penteado_manual" placeholder="Descreva o penteado" style="display:none; margin-bottom:10px;">

            <label>Franja:</label>
            <select name="franja" required>
                <option value="">Selecione...</option>
                <option value="Sem franja" data-preco="0">Sem franja â†’ GrÃ¡tis</option>
                <option value="Franja reta" data-preco="2">Franja reta â†’ +R$2</option>
                <option value="Franja lateral" data-preco="2">Franja lateral â†’ +R$2</option>
                <option value="Manual" data-preco="3">Descrever franja â†’ +R$3</option>
            </select>
            <input type="text" name="franja_manual" placeholder="Descreva a franja" style="display:none; margin-bottom:10px;">

            <!-- Cor do cabelo -->
            <label>Cor do cabelo:</label>
            <select name="cor_cabelo" required>
                <option value="">Selecione...</option>
                <option value="Preto" data-preco="0">Preto â†’ GrÃ¡tis</option>
                <option value="Castanho" data-preco="0">Castanho â†’ GrÃ¡tis</option>
                <option value="Loiro" data-preco="3">Loiro â†’ +R$3</option>
                <option value="Ruivo" data-preco="3">Ruivo â†’ +R$3</option>
                <option value="Branco" data-preco="4">Branco â†’ +R$4</option>
                <option value="Prateado" data-preco="4">Prateado â†’ +R$4</option>
                <option value="Azul" data-preco="5">Azul â†’ +R$5</option>
                <option value="Verde" data-preco="5">Verde â†’ +R$5</option>
                <option value="Roxo" data-preco="5">Roxo â†’ +R$5</option>
                <option value="Rosa" data-preco="5">Rosa â†’ +R$5</option>
                <option value="Multicolorido" data-preco="7">Multicolorido â†’ +R$7</option>
                <option value="DegradÃª" data-preco="7">DegradÃª â†’ +R$7</option>
                <option value="Manual" data-preco="5">Descrever cor manualmente â†’ +R$5</option>
            </select>
            <input type="text" name="cor_cabelo_manual" placeholder="Ex: #BD5769" style="display:none; margin-bottom:10px;">


<!-- Barba -->
<label>Barba:</label>
<select name="barba" required>
    <option value="">Selecione...</option>
    <option value="Sem barba" data-preco="0">Sem barba â†’ GrÃ¡tis</option>
    <option value="Barba rala" data-preco="2">Barba rala â†’ +R$2</option>
    <option value="Barba cheia" data-preco="3">Barba cheia â†’ +R$3</option>
    <option value="Manual" data-preco="5">Descrever barba â†’ +R$5</option>
</select>
<input type="text" name="barba_manual" placeholder="Descreva a barba" style="display:none; margin-bottom:10px;">



            <!-- AparÃªncia do personagem -->
            <h3>Roupas do Personagem</h3>

<!-- Roupas -->
<label>Tipo de roupa:</label>
<select name="roupas" id="roupas" required>
    <option value="">Selecione...</option>
    <option value="Casual" data-preco="0">Casual â†’ GrÃ¡tis</option>
    <option value="Social" data-preco="3">Social â†’ +R$3</option>
    <option value="Fantasia" data-preco="5">Fantasia â†’ +R$5</option>
    <option value="Manual" data-preco="5">Descrever tipo roupa â†’ +R$5</option>
</select>
<input type="text" name="roupas_manual" placeholder="Descreva o tipo de roupa" style="display:none; margin-bottom:10px;">

<!-- Cores da roupa -->
<label>Cores da roupa:</label>
<input type="text" name="cores_roupa" placeholder="Ex: Azul, Vermelho" required style="margin-bottom:10px;">

<!-- AcessÃ³rios / Detalhes Extras -->
<label>AcessÃ³rios / Detalhes Extras:</label>
<select name="acessorios" id="acessorios" required>
    <option value="">Selecione...</option>
    <option value="Nenhum" data-preco="0">Nenhum â†’ GrÃ¡tis</option>
    <option value="Brincos" data-preco="2">Brincos â†’ +R$2</option>
    <option value="Colar" data-preco="2">Colar â†’ +R$2</option>
    <option value="Pulseira" data-preco="2">Pulseira â†’ +R$2</option>
    <option value="Manual" data-preco="5">Descrever acessÃ³rio â†’ +R$5</option>
</select>
<input type="text" name="acessorios_manual" placeholder="Descreva o acessÃ³rio" style="display:none; margin-bottom:10px;">


<!-- Estilo ArtÃ­stico -->
<h3>Estilo de Desenho do Personagem</h3>

<label>Estilo ArtÃ­stico:</label>
<select name="estilo_artistico" id="estilo_artistico" required>
    <option value="">Selecione...</option>
    <option value="Chibi" data-preco="50">Chibi â†’ R$50</option>
    <option value="ChibiEmote" data-preco="50">Chibi para emote â†’ R$50</option>
    <option value="Anime" data-preco="80">Anime â†’ R$80</option>
    <option value="Cartoon" data-preco="70">Cartoon â†’ R$70</option>
    <option value="Pixel" data-preco="30">Pixel Arte â†’ R$30</option>
    <option value="HQ" data-preco="65">Cartoon estilo HQ â†’ R$65</option>
    <option value="Gamer" data-preco="70">Gamer â†’ R$70</option>
    <option value="Flat" data-preco="20">Flat Design â†’ R$20</option>
</select>

<!-- Poses Extras -->
<div id="extraDiv">
  <label for="poses">
    VocÃª quer adicionar mais poses desse personagem?  
    Escolha o tipo artÃ­stico selecionado acima:
  </label>
  <select id="poses">
    <option value="">NÃ£o adicionar poses</option>
    <option value="ChibiEmote" data-preco="75">Adicionar 5 poses Chibi para emote â†’ +R$75</option>
    <option value="Anime" data-preco="120">Adicionar 3 poses Anime â†’ +R$120</option>
    <option value="Cartoon" data-preco="110">Adicionar 3 poses Cartoon â†’ +R$110</option>
    <option value="Pixel" data-preco="20">Adicionar 3 poses Pixel Arte â†’ +R$20</option>
    <option value="HQ" data-preco="85">Adicionar 3 poses Cartoon estilo HQ â†’ +R$85</option>
  </select>

  <!-- Input de descriÃ§Ã£o -->
  <input type="text" id="descricaoPoses" name="roupas_manual" placeholder="Descreva todas as poses e expreÃ§Ãµes" style="display:none; margin-top:10px;">
</div>

<script>
  const posesSelect = document.getElementById('poses');
  const descricaoInput = document.getElementById('descricaoPoses');

  posesSelect.addEventListener('change', () => {
    if (posesSelect.value !== "") {
      descricaoInput.style.display = "block";
    } else {
      descricaoInput.style.display = "none";
      descricaoInput.value = ""; // limpa se escolher "NÃ£o adicionar poses"
    }
  });
</script>


<!-- Estilo ArtÃ­stico -->
<h3>Fundo da imagem</h3>
<select name="fundo" required>
    <option value="">Selecione...</option>
    <option value="PNG transparente" data-preco="0">PNG transparente â†’ GrÃ¡tis</option>
    <option value="Fundo 1 cor" data-preco="0">Fundo 1 cor â†’ GrÃ¡tis</option>
    <option value="Fundo degradÃª" data-preco="2">Fundo degradÃª â†’ +R$2</option>
    <option value="Manual" data-preco="10">Descrever manualmente â†’ +R$10</option>
</select>
<input type="text" name="fundo_manual" placeholder="Descreva o fundo" style="display:none; margin-bottom:10px;">
    

<!-- Extras avanÃ§ados -->
<h3>Extras AvanÃ§ados (pode selecionar mais de uma)</h3>
<label><input type="checkbox" name="efeito_magico" data-preco="3"> Efeitos mÃ¡gicos â†’ +R$3</label>
<label><input type="checkbox" name="aura_elemental" data-preco="5"> Aura elemental â†’ +R$5</label>
<label><input type="checkbox" name="poses_dinamicas" data-preco="3"> Poses dinÃ¢micas â†’ +R$3</label>
<label><input type="checkbox" name="objetos_mao" data-preco="2"> Objetos na mÃ£o â†’ +R$2</label>
<label><input type="checkbox" name="itens_colecao" data-preco="2"> Itens de coleÃ§Ã£o â†’ +R$2</label>
<label><input type="checkbox" name="efeitos_iluminacao" data-preco="3"> Efeitos de iluminaÃ§Ã£o â†’ +R$3</label>
<label><input type="checkbox" name="logo_integrado" data-preco="5"> Efeitos 3D â†’ +R$5</label>
<label><input type="checkbox" name="criar_logo" data-preco="10"> Criar logo Marca junto â†’ +R$10</label>
<label><input type="checkbox" name="personagem_animado" data-preco="20"> Personagem animado GIF â†’ +R$20</label>

            <!-- ServiÃ§o expresso -->
<label style="display: block; margin: 10px 0; font-weight: bold; color: #d46aff;">
    <input type="checkbox" id="servicoExpresso" data-extra="0.1">
    ATIVAR PRODUÃ‡ÃƒO EXPRESSA? (+10% do valor total)
</label>

      </div>

<!-- PreÃ§o total com desconto -->
<div id="precoTotal" style="font-size:1.3rem; font-weight:bold; margin-bottom:10px; padding:10px; border:2px solid #d46aff; border-radius:15px; background:#f8e6ff;">
    PreÃ§o atual: <span id="precoOriginal">R$ 0</span> 
    <span id="precoDesconto" style="color:red; text-decoration:line-through;"></span>
    <div id="precoComDesconto" style="margin-top:5px; font-weight:bold; color:#d46aff;"></div>
</div>

<!-- Cupom de desconto -->
<div id="cupomContainer" style="margin-bottom:15px; padding:15px; border:2px solid #d46aff; border-radius:15px; background:#f8e6ff;">
    <label for="cupomInput" style="font-weight:bold;">Insira seu cupom:</label>
    <input type="text" id="cupomInput" placeholder="Digite seu cupom aqui" style="width:100%; padding:10px; margin-top:5px; border-radius:10px; border:1px solid #ccc;">
    <button type="button" id="aplicarCupom" style="margin-top:10px; padding:10px 15px; border:none; border-radius:10px; background:#d46aff; color:#fff; cursor:pointer;">Aplicar cupom</button>
    <small style="display:block; margin-top:5px; color:#555;">*Apenas um cupom por vez.</small>
</div>

<!-- BotÃ£o enviar pedido -->
<button type="button" id="enviarPedido" style="width:100%; padding:18px; font-size:1.3rem; font-weight:bold; color:#fff; background:linear-gradient(135deg, #ff6a95, #d46aff, #8e2de2); border:none; border-radius:15px; cursor:pointer; margin-top:10px; box-shadow:0 5px 15px rgba(0,0,0,0.3);">
    ENVIAR PEDIDO
</button>

</form>
</div>
</div>

<!-- Paleta de cor RGB fixa -->
<div id="colorPickerContainer">
    <div id="colorPickerTitle">CRIE SUA COR AQUI!</div>
    <input type="color" id="colorInput">
    <input type="text" id="colorValue" readonly>
    <button id="copyColor">Copiar</button>
</div>

<!-- Coloque TODO o JS completo AQUI, substituindo o seu script atual -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    // ==============================
    // Mostrar campos manuais
    // ==============================
    const camposManuais = [
        {select: 'raca', manual: 'raca_outro'},
        {select: 'formato_rosto', manual: 'formato_rosto_manual'},
        {select: 'tipo_cabelo', manual: 'tipo_cabelo_manual'},
        {select: 'penteado', manual: 'penteado_manual'},
        {select: 'franja', manual: 'franja_manual'},
        {select: 'barba', manual: 'barba_manual'},
        {select: 'cor_cabelo', manual: 'cor_cabelo_manual'},
        {select: 'mechas', manual: 'mechas_manual'},
        {select: 'marcas', manual: 'marcas_manual'},
        {select: 'cor_olhos', manual: 'cor_olhos_manual'},
        {select: 'expressao', manual: 'expressao_manual'},
        {select: 'tom_pele', manual: 'tom_pele_manual'},
        {select: 'roupas', manual: 'roupas_manual'},
        {select: 'acessorios', manual: 'acessorios_manual'},
        {select: 'fundo', manual: 'fundo_manual'}
    ];

    camposManuais.forEach(c => {
        const sel = document.querySelector(`select[name="${c.select}"]`);
        const man = document.querySelector(`input[name="${c.manual}"]`);
        if(sel && man){
            sel.addEventListener('change', function() {
                if(this.value.toLowerCase() === "manual" || this.value.toLowerCase() === "outro"){
                    man.style.display = 'block';
                } else {
                    man.style.display = 'none';
                    man.value = "";
                }
                atualizarPreco();
            });
        }
    });

    // ==============================
    // Cupons de desconto
    // ==============================
    const cupons = {
        "KERO1OFF_SK": 1, "KERO2OFF_AN": 2, "KERO3OFF_MG": 3, "KERO4OFF_CH": 4,
        "KERO5OFF_PS": 5, "KERO6OFF_AR": 6, "KERO7OFF_CL": 7, "KERO8OFF_LN": 8,
        "KERO9OFF_CN": 9, "KERO10OFF_DS": 10, "KERO11OFF_PL": 11, "KERO12OFF_TL": 12,
        "KERO13OFF_CV": 13, "KERO14OFF_SB": 14, "KERO15OFF_FN": 15, "KERO16OFF_AT": 16,
        "KERO17OFF_PT": 17, "KERO18OFF_IL": 18, "KERO19OFF_HQ": 19, "KERO20OFF_CH": 20
    };

    let cupomAplicado = null;
    const inputCupom = document.getElementById("cupomInput");
    const btnAplicarCupom = document.getElementById("aplicarCupom");

    btnAplicarCupom.addEventListener("click", function() {
    const codigo = inputCupom.value.trim().toUpperCase();
    if(!codigo) return;
    if(cupons[codigo]){
        cupomAplicado = {codigo, desconto: cupons[codigo]};
        alert(`Cupom aplicado! Desconto de ${cupons[codigo]}%`);
    } else {
        cupomAplicado = null;
        alert("Cupom invÃ¡lido.");
    }
    atualizarPreco();
});


    // ==============================
// CÃ¡lculo de preÃ§o completo
// ==============================
function atualizarPreco(){
    let total = 0;

    // Somar selects
    document.querySelectorAll('select').forEach(select => {
        const opcao = select.options[select.selectedIndex];
        if(opcao) total += parseFloat(opcao.dataset.preco || 0);
    });

    // Somar checkboxes
    document.querySelectorAll('input[type="checkbox"]').forEach(chk => {
        if(chk.checked) total += parseFloat(chk.dataset.preco || 0);
    });

    // ServiÃ§o expresso (10%)
    const servicoExpresso = document.getElementById("servicoExpresso");
    if(servicoExpresso && servicoExpresso.checked){
        total += total * 0.10;
    }

    // Atualiza os elementos jÃ¡ existentes
    const precoOriginal = document.getElementById("precoOriginal");
    const precoDesconto = document.getElementById("precoDesconto");
    const precoComDesconto = document.getElementById("precoComDesconto");

    if(cupomAplicado){
        const desconto = total * (cupomAplicado.desconto / 100);
        const precoComDesc = total - desconto;

        precoOriginal.innerText = `R$ ${total.toFixed(2)}`;
        precoDesconto.innerText = `R$ ${total.toFixed(2)}`;
        precoComDesconto.innerText = `R$ ${precoComDesc.toFixed(2)}`;
    } else {
        precoOriginal.innerText = `R$ ${total.toFixed(2)}`;
        precoDesconto.innerText = ``;
        precoComDesconto.innerText = ``;
    }
}

// Observadores
document.querySelectorAll('select, input[type="checkbox"]').forEach(el => {
    el.addEventListener('change', atualizarPreco);
});
atualizarPreco();

    // ==============================
// Envio de pedido via WhatsApp
// ==============================
document.getElementById('enviarPedido').addEventListener('click', function() {
    const form = document.getElementById('personagemForm');
    const formData = new FormData(form);
    let mensagem = "*ğŸ“‹ FormulÃ¡rio de Encomenda â€“ Personagem Digital*\n\n";

    // Adiciona todos os campos do formulÃ¡rio
    for (let [key, value] of formData.entries()) {
        if(value) mensagem += `*${key.replace(/_/g, ' ')}:* ${value}\n`;
    }

    // Pega os preÃ§os exibidos na tela
    const precoContainer = document.getElementById('precoTotal');
    const precoAtual = precoContainer.querySelector('#precoOriginal')?.innerText || '';
    const precoComDesconto = precoContainer.querySelector('#precoComDesconto')?.innerText || '';

    mensagem += `\n*PreÃ§o atual:* ${precoAtual}`;
    if(precoComDesconto) {
        mensagem += `\n*PreÃ§o com desconto:* ${precoComDesconto}`;
    }

    const numeroZap = "+5521978046832"; // nÃºmero do WhatsApp
    const url = `https://api.whatsapp.com/send?phone=${numeroZap}&text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');
});


    // ==============================
    // Paleta de cores
    // ==============================
    const container = document.getElementById("colorPickerContainer");
    if (container) {
        const colorInput = document.getElementById("colorInput");
        const colorValue = document.getElementById("colorValue");
        const copyBtn = document.getElementById("copyColor");

        colorValue.value = colorInput.value;
        colorInput.addEventListener("input", () => {
            colorValue.value = colorInput.value;
        });

        copyBtn.addEventListener("click", () => {
            navigator.clipboard.writeText(colorValue.value);
            copyBtn.textContent = "Copiado!";
            setTimeout(() => copyBtn.textContent = "Copiar", 1500);
        });
    }

});
</script>
